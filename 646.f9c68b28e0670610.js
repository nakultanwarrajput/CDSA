"use strict";(self.webpackChunkmysaarathi_contract_dsa=self.webpackChunkmysaarathi_contract_dsa||[]).push([[646],{5646:(D,u,r)=>{r.r(u),r.d(u,{VideoKycModule:()=>A});var g=r(9808),s=r(5e3);let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-video-kyc"]],decls:0,vars:0,template:function(t,n){},styles:["span[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})();var h=r(5529),m=r(591),p=r(7625),C=r(13);r(2198);let l=(()=>{class e{constructor(t,n){this.zone=t,this.lang=n,this.message=new h.xQ,this.command=new h.xQ,this.commands={},this.context=new m.X(""),this.refreshGrammar=new m.X(!1),this.started=new m.X(!1),this._destroyed=new h.xQ,(window.SpeechRecognition||window.webkitSpeechRecognition)&&this.init()}init(){const t=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new t,this.recognition.lang=this.lang,this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.continuous=!0,this.recognition.onresult=n=>{let i={message:""},c="";if(n.results){const a=n.results[n.resultIndex];a.isFinal&&(a[0].confidence<.3?i={error:!0,message:"Cannot recognize"}:(c=a[0].transcript.trim().toLowerCase(),i={success:!0,message:c}))}this.zone.run(()=>{if(i.error)this.message.error(i);else{this.message.next(i);const a=this.getContextForWord(c);a?this.context.next(a):this.commands[this.context.value]&&this.commands[this.context.value][c]?this.command.next({context:this.context.value,command:c}):this.commands[""]&&this.commands[""][c]&&this.command.next({context:"",command:c})}})},this.recognition.onerror=n=>{this.zone.run(()=>{this.message.error(n)})},this.recognition.onstart=()=>{this.zone.run(()=>{this.started.next(!0)})},this.recognition.onend=()=>{this.zone.run(()=>{this.started.next(!1)})},this.refreshGrammar.pipe((0,p.R)(this._destroyed),(0,C.b)(500)).subscribe(()=>{this.setGrammar()})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}start(){!this.started.getValue()&&this.recognition&&this.recognition.start()}stop(){this.started.getValue()&&this.recognition&&this.recognition.stop()}declareContext(t){const n=t.map(i=>i.toLowerCase()).join("/");this.commands[n]||(this.commands[n]={}),this.refreshGrammar.next(!0)}declareCommand(t,n){const i=n.map(c=>c.toLowerCase()).join("/");this.commands[i]||(this.commands[i]={}),this.commands[i][t.toLowerCase()]=!0,this.refreshGrammar.next(!0)}setContext(t){const n=t.map(i=>i.toLowerCase()).join("/");this.context.next(n)}getContextForWord(t){const n=this.context.value?this.context.value+"/"+t:t;return this.commands[n]?n:this.commands[t]?t:null}setGrammar(){const t=window.SpeechGrammarList||window.webkitSpeechGrammarList;if(t&&this.recognition){const n={};Object.keys(this.commands).forEach(a=>{a.split("/").forEach(d=>{n[d]=!0}),Object.keys(this.commands[a]).forEach(d=>n[d]=!0)});const i="#JSGF V1.0; grammar Digits;\npublic <Digits> = ( <digit> ) + ;\n<digit> = ( zero | one | two | three | four | five | six | seven | eight | nine ); public <command> = "+Object.keys(n).join(" | ")+" ;",c=new t;c.addFromString(i,1),this.recognition.grammars=c}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.R0b),s.LFG("SPEECH_LANG"))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[l],imports:[[g.ez]]}),e})();var w=r(286),V=r(8555);const K=[{path:"kyc-started",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-video-kyc-start-screen"]],decls:0,vars:0,template:function(t,n){},styles:["span[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})()},{path:"recording-phase",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-video-kyc-recording-phase"]],decls:0,vars:0,template:function(t,n){},styles:["span[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})()},{path:"kyc-done",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-video-kyc-finish-screen"]],decls:0,vars:0,template:function(t,n){},styles:["span[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})()},{path:"instruction",component:y}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[f,{provide:"SPEECH_LANG",useValue:"en-US"}],imports:[[w.h,g.ez,x,V.Bz.forChild(K)]]}),e})()}}]);